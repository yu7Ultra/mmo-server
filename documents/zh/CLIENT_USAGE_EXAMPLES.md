# 客户端使用示例

## 快速开始

### 1. 启动服务器
```bash
# 在根目录
yarn install
yarn build
yarn start
```
服务器将在 `http://localhost:2567` 启动

### 2. 启动客户端
```bash
# 在 client 目录
cd client
yarn install
yarn dev
```
客户端将在 `http://localhost:5173` 启动

### 3. 打开浏览器
访问 `http://localhost:5173` 即可开始游戏

## 游戏演示场景

### 场景1: 新手入门
```
1. 打开游戏后，你会看到：
   - 游戏画面中央有一个红色圆圈（你的角色）
   - 右侧有UI面板显示你的状态
   - 等级为1，生命100，魔法100

2. 开始移动：
   - 按 ↑ 向上移动
   - 按 ↓ 向下移动
   - 按 ← 向左移动
   - 按 → 向右移动
   - 松开按键自动停止

3. 查看你的状态：
   - 等级: 1
   - 经验: 0/100
   - 生命: 100/100
   - 魔法: 100/100
   - 攻击: 10
   - 防御: 5
```

### 场景2: 使用技能
```
1. 查看技能面板，你有4个技能：
   [1] Fireball - 火球术（20魔法，3秒冷却）
   [2] Heal - 治疗术（30魔法，5秒冷却）
   [3] Shield - 护盾（25魔法，10秒冷却）
   [4] Dash - 冲刺（15魔法，4秒冷却）

2. 使用治疗术：
   - 按数字键 2
   - 你的生命值增加40点
   - 魔法值减少30点
   - 技能进入5秒冷却

3. 冷却显示：
   - 技能图标变暗
   - 显示剩余冷却时间："4.9s... 4.8s..."
   - 魔法不足时无法使用
   - 就绪后图标变亮，显示绿色边框
```

### 场景3: 战斗系统
```
假设有另一个玩家（绿色圆圈）出现在屏幕上：

1. 普通攻击：
   - 点击绿色圆圈
   - 发送攻击指令到服务器
   - 敌人生命值下降（生命条变短）

2. 技能攻击：
   - 按数字键 1 使用火球术
   - 自动攻击最近的敌人
   - 造成30点伤害
   - 消耗20点魔法
   - 进入3秒冷却

3. 观察战斗结果：
   - 敌人生命条变化
   - 你的击杀数增加（如果击杀成功）
   - 获得经验值
   - 可能升级
```

### 场景4: 聊天交流
```
1. 发送消息：
   - 点击聊天输入框
   - 输入："Hello!"
   - 按回车或点击"发送"按钮
   - 消息出现在聊天面板

2. 查看聊天：
   - 聊天面板显示最近50条消息
   - 格式："发送者: 消息内容"
   - 全局频道消息有蓝色边框
   - 自动滚动到最新消息

3. 注意事项：
   - 最多200字符
   - 每秒最多1条消息（服务器限制）
   - 禁止敏感词汇
```

### 场景5: 任务系统
```
1. 查看任务面板：
   新手默认有3个任务：
   
   ✓ 击败敌人
     进度: 0/5
     奖励: 100经验
   
   ✓ 探索世界
     进度: 0/100
     奖励: 50经验
   
   ✓ 达到5级
     进度: 1/5
     奖励: 200经验

2. 完成任务：
   - 击败一个敌人
   - 任务进度自动更新："1/5"
   - 继续战斗，完成5次击杀
   - 任务显示为完成状态（绿色背景，✓标记）
   - 自动获得100经验值

3. 移动探索：
   - 使用方向键四处移动
   - "探索世界"任务进度增加
   - 移动100次后完成
   - 获得50经验值
```

### 场景6: 成就系统
```
成就自动解锁，无需手动操作：

1. First Blood（首次击杀）
   - 击杀第一个敌人后解锁
   - 成就面板出现金色高亮

2. Killer（杀手）
   - 击杀10个敌人后解锁
   
3. Leveling（升级）
   - 达到5级后解锁
   
4. Damage Dealer（输出大师）
   - 累计造成1000伤害后解锁

查看成就：
✓ First Blood
  击杀你的第一个敌人

✓ Leveling
  达到等级5
```

### 场景7: 排行榜
```
排行榜每5秒自动更新：

排行榜
━━━━━━━━━━━━━━━━━━
#1  ProGamer    Lv.15  2500
#2  Player456   Lv.10  1200
#3  Hero123     Lv.8   800
#4  You         Lv.5   350
#5  Newbie      Lv.3   150

积分计算公式：
(等级 × 100) + (击杀 × 50) - (死亡 × 25)

提升排名方法：
- 升级（每级+100分）
- 击杀敌人（每次+50分）
- 避免死亡（每次-25分）
```

## 高级技巧

### 连招组合
```
1. 攻击型连招：
   ① 按 1 使用火球术（远程伤害）
   ② 点击敌人普通攻击
   ③ 等待冷却
   ④ 再次使用火球术
   
2. 生存型连招：
   ① 受到攻击时按 3 使用护盾（+10防御）
   ② 等待5秒护盾效果生效
   ③ 生命低于50%时按 2 治疗
   ④ 按 4 使用冲刺逃离
   
3. 追击型连招：
   ① 按 4 使用冲刺（2倍速度）
   ② 快速接近敌人
   ③ 按 1 使用火球术
   ④ 点击敌人持续攻击
```

### 资源管理
```
魔法管理策略：
- 总魔法：100点
- 火球术：20点（5次）
- 治疗术：30点（3次）
- 护盾：25点（4次）
- 冲刺：15点（6次）

建议分配：
- 保留30点用于紧急治疗
- 保留15点用于逃跑冲刺
- 剩余55点用于攻击和防御

魔法恢复：
- 自动恢复：每秒2点
- 脱离战斗后恢复更快
```

### 升级路线
```
等级1 → 等级5（新手期）
- 完成新手任务获得经验
- 击杀敌人练级
- 目标：解锁"达到5级"成就

等级5 → 等级10（进阶期）
- 参与更多战斗
- 维持正K/D比
- 目标：进入排行榜前10

等级10+（高手期）
- 保持高击杀率
- 帮助新手玩家
- 争夺排行榜第一
```

## 常见问题解决

### 问题1: 技能用不了
```
检查清单：
☑ 魔法值是否充足？
  - 查看玩家状态面板
  - 魔法条是否足够蓝色

☑ 技能是否在冷却？
  - 查看技能面板
  - 是否显示倒计时（如"2.5s"）

☑ 是否选择了目标？
  - 火球术需要附近有敌人
  - 治疗/护盾/冲刺不需要目标

解决方法：
- 等待魔法恢复
- 等待冷却结束
- 靠近敌人后再使用攻击技能
```

### 问题2: 移动不流畅
```
可能原因：
1. 网络延迟高
   - 检查服务器连接
   - 查看控制台是否有错误

2. 按键响应慢
   - 确保浏览器窗口处于焦点
   - 不要同时按多个方向键

3. 帧率低
   - 关闭其他标签页
   - 降低浏览器缩放级别

优化方法：
- 使用Chrome或Edge浏览器
- 启用硬件加速
- 本地运行服务器和客户端
```

### 问题3: 聊天发不出去
```
可能原因：
1. 速率限制
   - 服务器限制：1消息/秒
   - 等待1秒后重试

2. 消息太长
   - 最大200字符
   - 精简消息内容

3. 包含敏感词
   - 服务器有基础过滤
   - 修改措辞后重试

建议：
- 间隔发送消息
- 保持消息简短
- 使用友好语言
```

## 性能建议

### 浏览器设置
```
推荐浏览器：
✓ Chrome 90+
✓ Edge 90+
✓ Firefox 88+
✓ Safari 14+

浏览器设置：
1. 启用硬件加速
   Chrome: 设置 → 系统 → 使用硬件加速
   
2. 清除缓存
   定期清理浏览器缓存
   
3. 关闭不必要的扩展
   减少资源占用
```

### 网络优化
```
最佳网络环境：
- 延迟：< 50ms
- 带宽：> 1Mbps
- 连接：有线连接优于WiFi

检查网络：
1. 打开浏览器控制台（F12）
2. 切换到Network标签
3. 查看WebSocket连接
4. Ping时间应在50ms以下
```

### 系统要求
```
最低配置：
- CPU: 双核2.0GHz
- 内存: 4GB
- 显卡: 集成显卡
- 屏幕: 1280x720

推荐配置：
- CPU: 四核3.0GHz+
- 内存: 8GB+
- 显卡: 独立显卡
- 屏幕: 1920x1080+
```

## 调试技巧

### 查看实时状态
```
打开浏览器控制台（F12），输入：

// 查看房间状态
console.log(room.state);

// 查看当前玩家
console.log(room.state.players.get(room.sessionId));

// 查看所有玩家
room.state.players.forEach((p, id) => {
  console.log(id, p.name, p.level);
});

// 查看聊天消息
console.log(room.state.chatMessages);

// 查看排行榜
console.log(room.state.leaderboard);
```

### 监听事件
```
// 监听玩家加入
room.state.players.onAdd((player, sessionId) => {
  console.log('Player joined:', player.name);
});

// 监听玩家离开
room.state.players.onRemove((player, sessionId) => {
  console.log('Player left:', player.name);
});

// 监听聊天消息
room.state.chatMessages.onAdd((msg) => {
  console.log(`${msg.sender}: ${msg.message}`);
});
```

## 总结

客户端已经完整实现了服务器提供的所有主要功能：
- ✅ 8个UI面板
- ✅ 4种交互方式
- ✅ 实时状态同步
- ✅ 流畅的游戏体验

开始游戏，享受MMO的乐趣吧！🎮
